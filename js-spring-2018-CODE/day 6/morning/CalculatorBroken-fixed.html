<html>

<head>
    <script>
        Memory = "0"; // initialise memory variable
        Current = "0"; //   and value of Display ("current" value)
        Operation = 0; // Records code for eg * / etc.
        MAXLENGTH = 30; // maximum number of digits before decimal!

        function addDigit(digit) { //ADD A DIGIT TO DISPLAY (kept as 'Current')
            if (Current.length > MAXLENGTH) {
                Current = "Aargh! Too long"; //limit length
            } else {
                if ((eval(Current) == 0) && (Current.indexOf(".") == -1)) {
                    Current = digit;
                } else {
                    Current = Current + digit;
                };
            };
            document.Calculator.Display.value = Current;
        };

        function Dot() {
            if (Current == 0) {
                Current = "0.";
            } else {
                if (Current.indexOf('.') == -1) {
                    Current = Current + ".";
                };
            };
            document.Calculator.Display.value = Current;
        }

        function Clear() {
            Current = Memory;
            document.Calculator.Display.value = Current;
        }

        function AllClear() {
            Current = "0";
            Operation = 0;
            Memory = Current;
            document.Calculator.Display.value = Current;
        }

        function Operate(op) { //STORE OPERATION e.g. + * / etc.

            if (op.indexOf("*") > -1) {
                Operation = 1;
            }; //codes for *
            if (op.indexOf("/") > -1) {
                Operation = 2;
            }; // slash (divide)
            if (op.indexOf("+") > -1) {
                Operation = 3;
            }; // sum
            if (op.indexOf("-") > -1) {
                Operation = 4;
            }; // difference

            Memory = Current; //store value
            Current = ""; //or we could use "0"
            document.Calculator.Display.value = Current;
        }

        function Calculate() { //PERFORM CALCULATION (= button)
            if (Operation == 1) {
                Current = eval(Memory) * eval(Current);
            };
            if (Operation == 2) {
                Current = eval(Memory) / eval(Current);
            };
            if (Operation == 3) {
                Current = eval(Memory) + eval(Current);
            };
            if (Operation == 4) {
                Current = eval(Memory) - eval(Current);
            };
            Operation = 0; //clear operation
            Memory = "0"; //clear memory
            document.Calculator.Display.value = Current;
        }

    </script>
</head>

<body>
    <FORM name="Calculator">
        <table border="4">
            <!--OUTER BORDER OF CALCULATOR, PANELS-->
            <tr>
                <!--TOP PANEL------>
                <td colspan="2">A Simple JavaScript Calculator
                    <br>
                    <input type="text" maxlength="40" size="30" name="Display">
                </td>
            </tr>
            <!--END TOP PANEL--->
            <tr>
                <td>
                    <!--LEFT PANEL------>
                    <table>
                        <tr>
                            <td>
                                <input type="button" value="1" onclick="addDigit('1');">
                            </td>
                            <td>
                                <input type="button" value="2" onclick="addDigit('2');">
                            </td>
                            <td>
                                <input type="button" value="3" onclick="addDigit('3');">
                            </td>
                            <td>
                                <input type="button" title="add" value="+" onclick="Operate('+');">
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <input type="button" value="4" onclick="addDigit('4');">
                            </td>
                            <td>
                                <input type="button" value="5" onclick="addDigit('5');">
                            </td>
                            <td>
                                <input type="button" value="6" onclick="addDigit('6');">
                            </td>
                            <td>
                                <input type="button" title="subtract" value="-" onclick="Operate('-');">
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <input type="button" value="7" onclick="addDigit('7');">
                            </td>
                            <td>
                                <input type="button" value="8" onclick="addDigit('8');">
                            </td>
                            <td>
                                <input type="button" value="9" onclick="addDigit('9');">
                            </td>
                            <td>
                                <input type="button" title="multiply" value="*" onclick="Operate('*');">
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <input type="button" value="." onclick="Dot();">
                            </td>
                            <td>
                                <input type="button" value="0" onclick="addDigit('0');">
                            </td>
                            <td>
                                <input type="button" value="=" onclick="Calculate();">
                            </td>
                            <td>
                                <input type="button" title="divide" value="/" onclick="Operate('/');">
                            </td>
                        </tr>
                    </table>
                </td>
                <td>
                    <input type="button" title="Clear" value="Clear" onclick="AllClear();">
                </td>
            </tr>
        </table>
    </FORM>
</body>

</html>
